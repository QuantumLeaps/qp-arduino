<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QTools: QS Target Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">
    <img id="logo" src="img/logo_ql.png" alt="Quantum Leaps">
  </a>
  <span id="projectname">QTools</span>
  <span id="projectnumber">6.9.3</span>
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('qs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QS Target Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qs_tstamp">Target Time-Stamps</a></li>
<li class="level1"><a href="#qs_pre">Predefined QS Trace Records</a></li>
<li class="level1"><a href="#qs_app">Application-Specific QS Trace Records</a><ul><li class="level2"><a href="#qs_app_rep">Application-Specific Record Representation</a></li>
<li class="level2"><a href="#qs_app_exa">Application-Specific Record Examples</a></li>
<li class="level2"><a href="#qs_app_el">Application-Specific Data Elements</a></li>
</ul>
</li>
<li class="level1"><a href="#qs_filters">QS Filters</a><ul><li class="level2"><a href="#qs_global">Global Filter</a></li>
<li class="level2"><a href="#qs_local">Local Filter</a></li>
</ul>
</li>
<li class="level1"><a href="#qs_curr">Current Objects</a></li>
<li class="level1"><a href="#qs_dict">QS Dictionaries</a></li>
<li class="level1"><a href="#qs_rx">QS-RX Receive-Channel</a></li>
</ul>
</div>
<div class="textblock"><p>The target-resident component of the QP/Spy&trade; tracing system is called <b>QS</b>. The purpose of QS is to provide facilities for <b>instrumenting</b> the target code so that it will produce interesting real-time trace from code execution. In this sense it is similar to peppering the code with <code>printf</code> statements. However, the main difference between QS and <code>printf</code> is <em>where</em> the data <b>formatting</b> and <b>sending</b> is done. When you use <code>printf</code>s, the data formatting and sending occur in the time-critical paths through your embedded code. In contrast, the QS target-resident component inserts raw binary data into the QS ring buffer, so all the time-consuming formatting is removed from the Target system and is done <em>after</em> the fact in the Host. Additionally, in QS, data logging and sending to the Host are separated so that the target system can typically perform the transmission outside of the time-critical path, for example in the <em>idle processing</em> of the target CPU. </p>
<p>The QS target component consists of the QS ring buffer, the QS filters, as well as the instrumentation added to the QP framework and the application, as shown in figure below. Additionally, the QS target component contains the receive-channel (<a class="el" href="qs.html#qs_rx">QS-RX</a>) with its own receive buffer, which can receive data from the QSPY host component.</p>
<p><a class="anchor" id="fig_struct"></a></p><div class="image">
<img src="qspy5.gif" alt=""/>
<div class="caption">
Structure of the QP/Spy software tracing system</div></div>
<p>A nice byproduct of removing the data formatting from the Target is a natural <b>data compression</b>. For example, formatted output of a single byte takes two hexadecimal digits(and 3 decimal digits), so avoiding the formatting gives at least a factor of two in data density. On top of this natural compression, QS uses such techniques as data dictionaries, and compressed format information, which in practice result in compression factor of 4-5 compared to the expanded human-readable format.</p>
<dl class="section attention"><dt>Attention</dt><dd>The QS instrumentation is designed such that it is active only in the <em>Spy build configuration</em> (when the external macro <a class="el" href="macros_8h.html#a668b5df6d955d0b1c77227192078689b" title="The preprocessor switch to activate the QS software tracing instrumentation in the code.">Q_SPY</a> is defined) and is <b>inactive</b> otherwise. This means that you don't need to comment-out or remove the instrumentation in the Debug or Release build configurations, but rather you can <b>leave</b> the instrumentation in your code for its future development, testing, profiling and maintenance.</dd></dl>
<h1><a class="anchor" id="qs_tstamp"></a>
Target Time-Stamps</h1>
<p>Most QS trace records produced by QS are <b>time-stamped</b> with a high-resolution counter (the resolution depends on the availability of a hardware timer-counter in the Target, but typically provides sub-microsecond granularity). QS provides an efficient API for obtaining platform-specific timestamp information. Given the right timer-counter resource in you Target system, you can provide QS with as precise timestamp information as required. The size of the timestamp is configurable to be 1, 2, or 4 bytes (see <a class="el" href="qs__copy_8h.html#a2495d53a05dadde00fc49675401f9490" title="The size [bytes] of the QS time stamp.">QS_TIME_SIZE</a>).</p>
<dl class="section note"><dt>Note</dt><dd>The QS <b>timestamps</b> are used differently in the <a class="el" href="qutest.html">QUTest&trade;</a> unit testing. In that case the timestamps are used to count the QS records produced.</dd></dl>
<h1><a class="anchor" id="qs_pre"></a>
Predefined QS Trace Records</h1>
<p>The <a href="https://www.state-machine.com/qpc">QP/C</a> and <a href="https://www.state-machine.com/qpcpp">QP/C++</a> frameworks contain the QS instrumentation for tracing the interesting occurrences within the frameworks, such as state machines activity (dispatching events, entering/exiting a state, executing transitions, etc.), active object activity (allocating events, posting/publishing events, time events, etc.), and more. All this instrumentation reserves 100 <b>predefined</b> QS trace records, which are enumerated in <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5" title="Quantum Spy record types.">QSpyRecords</a>. These QS records have predefined (hard-coded) structure both in the QS target-resident component and the <a class="el" href="qspy.html">QSPY</a> host-based application. See also the documentation of the <a class="el" href="qspy_text.html#qspy_pre">human-readable output</a> generated from the predefined QS records.</p>
<h1><a class="anchor" id="qs_app"></a>
Application-Specific QS Trace Records</h1>
<p>Additionally to the predefined QS records, you can add your own, flexible, <b>application-specific</b> trace records, which are not known in advance to the <a class="el" href="qspy.html">QSPY</a> host-resident component. You can think of the application-specific records as an equivalent to <code>printf()</code> but with much less overhead. The following code snippet shows an example of an application-specific QS record from your embedded code:</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> MyAppRecords {</div>
<div class="line">    PHILO_STAT = <a class="code" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176">QS_USER</a>, <span class="comment">/* offset for User QS Records */</span></div>
<div class="line">    COMMAND_STAT,</div>
<div class="line">    ~ ~ ~</div>
<div class="line">};</div>
<div class="line">~ ~ ~<a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c"></a></div>
<div class="line"><a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a>(PHILO_STAT, AO_Philo[n]-&gt;prio) <span class="comment">/* application-specific record begin */</span></div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab">QS_U8</a>(1, n);  <span class="comment">/* application-specific data element (Philo number) */</span></div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a7ad67719163eea844e44bee7f0478c0a">QS_STR</a>(stat); <span class="comment">/* application-specific data element (Philo status) */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()          <span class="comment">/* application-specific record end */</span></div>
<div class="ttc" id="aqs__copy_8h_html_a129128a3bb20d0b9286ff7c68f1401ab"><div class="ttname"><a href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab">QS_U8</a></div><div class="ttdeci">#define QS_U8(width_, data_)</div><div class="ttdoc">Output formatted uint8_t to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00620">qs_copy.h:620</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a2ed1002d3dda6d95f9f64c59b8453c71"><div class="ttname"><a href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a></div><div class="ttdeci">#define QS_END()</div><div class="ttdoc">End a QS record with exiting critical section.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00585">qs_copy.h:585</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a43a3e7f568e445f82c0be2ebf924654c"><div class="ttname"><a href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a></div><div class="ttdeci">#define QS_BEGIN_ID(rec_, qs_id_)</div><div class="ttdoc">Begin an application-specific (user) QS record with object-id for the local filter.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00574">qs_copy.h:574</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a7ad67719163eea844e44bee7f0478c0a"><div class="ttname"><a href="qs__copy_8h.html#a7ad67719163eea844e44bee7f0478c0a">QS_STR</a></div><div class="ttdeci">#define QS_STR(str_)</div><div class="ttdoc">Output formatted zero-terminated ASCII string to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00656">qs_copy.h:656</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176"><div class="ttname"><a href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176">QS_USER</a></div><div class="ttdeci">@ QS_USER</div><div class="ttdoc">the first record available to QS users</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00197">qs_copy.h:196</a></div></div>
</div><!-- fragment --><p>As you can see from the example above, an application-specific trace record always begins with <a class="el" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c" title="Begin an application-specific (user) QS record with object-id for the local filter.">QS_BEGIN_ID()</a>, followed by a number of <a class="el" href="qs.html#qs_app_el">application-specific data elements</a>, followed by <a class="el" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71" title="End a QS record with exiting critical section.">QS_END()</a>.</p>
<dl class="section attention"><dt>Attention</dt><dd>The application-specific records use the 25 <a class="el" href="qpspy_proto.html">Record-Types</a> in the range <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> .. 124 (see also User-All group in <a class="el" href="qs.html#qs_global">Global Filter</a>). Therefore, you need to <b>offset</b> your application-specific trace records by the <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> constant to avoid overlap with the <a class="el" href="qs.html#qs_pre">predefined QS records</a> already instrumented into the QP components.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>As all QS trace records, the application-specific records are produced in a critical section of code (interrupts disabled). Therefore, you should keep the number of <a class="el" href="qs.html#qs_app_el">application-specific data elements</a> of the record reasonably short.</dd></dl>
<h2><a class="anchor" id="qs_app_rep"></a>
Application-Specific Record Representation</h2>
<p>The biggest challenge in supporting flexible "application-specific" trace records is to provide the data type information with the data itself, so that <a class="el" href="qspy.html">QSPY</a> "knows" how to parse such record and move on to the next data element within the record. The figure below shows the encoding of the application-specific trace record from the listing previous.</p>
<div class="image">
<img src="qspy_app.gif" alt=""/>
<div class="caption">
Structure of an Application-Specific trace record</div></div>
<p>The application-specific trace record, like all <a class="el" href="qpspy_proto.html">QS records</a>, starts with the Sequence Number and the Record-Type. Every application-specific trace record also contains the <a class="el" href="qs.html#qs_tstamp">timestamp</a> immediately following the Record Type. The number of bytes used by the timestamp is configurable by the macro <a class="el" href="qs__copy_8h.html#a2495d53a05dadde00fc49675401f9490" title="The size [bytes] of the QS time stamp.">QS_TIME_SIZE</a>. After the timestamp, you see the data elements, such as a byte (<a class="el" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab" title="Output formatted uint8_t to the QS record.">QS_U8()</a>) and a string (<a class="el" href="qs__copy_8h.html#a7ad67719163eea844e44bee7f0478c0a" title="Output formatted zero-terminated ASCII string to the QS record.">QS_STR()</a>). Each of these data elements starts with a fmt (format) byte, which actually contains both the data-type information (in the lower nibble) and the format width for displaying that element (in the upper nibble). For example, the data element <a class="el" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab" title="Output formatted uint8_t to the QS record.">QS_U8(1, n)</a> will cause the value 'n' to be encoded as u<code>int8_t</code> with the format width of 1 decimal digits.</p>
<dl class="section remark"><dt>Remarks</dt><dd>The maximum allowed format width is 15 decimal digits, while format width of 0 means that a numeric value should be formatted in minimum number of digits.</dd></dl>
<p>As shown in the listing above, typically the application-specific records are enclosed with the <a class="el" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c" title="Begin an application-specific (user) QS record with object-id for the local filter.">QS_BEGIN_ID()</a> / <a class="el" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71" title="End a QS record with exiting critical section.">QS_END()</a> pair of macros. This pair of macros disables interrupts at the beginning and enables at the end of each record. Occasionally you would want to generate trace data from within already established critical sections or ISRs. In such rare occasions, you would use the macros <a class="el" href="qs__copy_8h.html#a98ae9bc427910662dc53ed1d15aaa044" title="Begin a QS user record without entering critical section.">QS_BEGIN_NOCRIT()</a> / <a class="el" href="qs__copy_8h.html#a2d38d50c6d69094bbe3bee00de5140d0" title="End a QS user record without exiting critical section.">QS_END_NOCRIT()</a> to avoid nesting of critical sections.</p>
<p>The record-begin macro <a class="el" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c" title="Begin an application-specific (user) QS record with object-id for the local filter.">QS_BEGIN_ID()</a> takes two arguments. The first argument (e.g., <code>PHILO_STAT</code>) is the enumerated <a class="el" href="qpspy_proto.html">Record-Type</a>, which is used in the <a class="el" href="qs.html#qs_global">global filter</a> and is part of the each record header.</p>
<p>The second argument (e.g., <code>AO_Philo[n]-&gt;prio</code> in the example above) is used for the <a class="el" href="qs.html#qs_local">local filter</a>, which allows you to selectively log only specific objects. The code snippet shows an example of an application-specific trace record, including the use of the second parameter of the <a class="el" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c" title="Begin an application-specific (user) QS record with object-id for the local filter.">QS_BEGIN_ID()</a> macro.</p>
<h2><a class="anchor" id="qs_app_exa"></a>
Application-Specific Record Examples</h2>
<p>The following examples show the QS application-specific trace records as C code on the left, and the output generated by the <a class="el" href="qspy.html">QSPY</a> host application from these records. The examples assume that the <a class="el" href="qs.html#qs_dict">QS dictionaries</a> have been produced for the Record-Types and function/object pointers used.</p>
<table align="center" valign="middle">
<tr>
<th><b>Trace Record</b> </th><th><p class="starttd"><b>QSPY ouptut</b> </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a>(PHILO_STAT, AO_Philo[n]-&gt;prio)</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab">QS_U8</a>(1, n);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a7ad67719163eea844e44bee7f0478c0a">QS_STR</a>(stat);</div>
<div class="line"><a class="code" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()</div>
</div><!-- fragment -->  </td><td><p class="starttd"><code>1018004718 PHILO_STAT 1 thinking</code><br  />
NOTE: produced only when <code>AO_Philo[n]</code> is enabled in the <a class="el" href="qs.html#qs_local">QS Local Filter</a>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a>(IO_CALL, 0U)</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a9342913835bccef5ded5a59d2712101a">QS_FUN</a>(&amp;IO_Read);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#aa56a51195cc2819fb2612e3c24723bae">QS_I16</a>(0, ret);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a>(0, offset);</div>
<div class="line"><a class="code" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()</div>
<div class="ttc" id="aqs__copy_8h_html_a17e249417c7e49c8e2913b17696acbc0"><div class="ttname"><a href="qs__copy_8h.html#a17e249417c7e49c8e2913b17696acbc0">QS_U32</a></div><div class="ttdeci">#define QS_U32(width_, data_)</div><div class="ttdoc">Output formatted uint32_t to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00636">qs_copy.h:636</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a9342913835bccef5ded5a59d2712101a"><div class="ttname"><a href="qs__copy_8h.html#a9342913835bccef5ded5a59d2712101a">QS_FUN</a></div><div class="ttdeci">#define QS_FUN(fun_)</div><div class="ttdoc">Output formatted function pointer to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00686">qs_copy.h:686</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_aa56a51195cc2819fb2612e3c24723bae"><div class="ttname"><a href="qs__copy_8h.html#aa56a51195cc2819fb2612e3c24723bae">QS_I16</a></div><div class="ttdeci">#define QS_I16(width_, data_)</div><div class="ttdoc">Output formatted int16_t to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00624">qs_copy.h:624</a></div></div>
</div><!-- fragment -->  </td><td><p class="starttd"><code>1055004424 IO_CALL IO_Read -129 0</code>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a>(DATA_RX, 0U)</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b">QS_OBJ</a>(me);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a3b053b820c90aac6aa7e10adb76a18a5">QS_U16</a>(data_len);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a68d599cd42fd0fec8cca70251361d8cc">QS_MEM</a>(data_buf, 16);</div>
<div class="line"><a class="code" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()</div>
<div class="ttc" id="aqs__copy_8h_html_a1b8d4d79089735ec19915ef7ed3e2e0b"><div class="ttname"><a href="qs__copy_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b">QS_OBJ</a></div><div class="ttdeci">#define QS_OBJ(obj_)</div><div class="ttdoc">Output formatted object pointer to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00672">qs_copy.h:672</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a3b053b820c90aac6aa7e10adb76a18a5"><div class="ttname"><a href="qs__copy_8h.html#a3b053b820c90aac6aa7e10adb76a18a5">QS_U16</a></div><div class="ttdeci">#define QS_U16(width_, data_)</div><div class="ttdoc">Output formatted uint16_t to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00628">qs_copy.h:628</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a68d599cd42fd0fec8cca70251361d8cc"><div class="ttname"><a href="qs__copy_8h.html#a68d599cd42fd0fec8cca70251361d8cc">QS_MEM</a></div><div class="ttdeci">#define QS_MEM(mem_, size_)</div><div class="ttdoc">Output formatted memory block of up to 255 bytes to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00659">qs_copy.h:659</a></div></div>
</div><!-- fragment -->  </td><td><p class="starttd"><code>0207024814 DATA_RX l_uart2 10 17 84 BB 40 FD 15 00 00 99 0B 00 00 90 0D 00 20</code>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><div class="fragment"><div class="line"><a class="code" href="qs__copy_8h.html#a43a3e7f568e445f82c0be2ebf924654c">QS_BEGIN_ID</a>(FP_DATA, <a class="code" href="qs__copy_8h.html#a31b97dc8d446e10f9a4200f95370b471a9fc99953b06474c323345c1c0a62ea51">QS_AP_ID</a> + 1U)</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a76d242e299411954043362240acd6a81">QS_F32</a>(6, 3141.5F);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a4ba311d067e53eb59c945b62c83575cb">QS_F64</a>(10, -2.718281828e5);</div>
<div class="line"><a class="code" href="qs__copy_8h.html#a2ed1002d3dda6d95f9f64c59b8453c71">QS_END</a>()</div>
<div class="ttc" id="aqs__copy_8h_html_a31b97dc8d446e10f9a4200f95370b471a9fc99953b06474c323345c1c0a62ea51"><div class="ttname"><a href="qs__copy_8h.html#a31b97dc8d446e10f9a4200f95370b471a9fc99953b06474c323345c1c0a62ea51">QS_AP_ID</a></div><div class="ttdeci">@ QS_AP_ID</div><div class="ttdoc">offset for Application-specific IDs</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00231">qs_copy.h:231</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a4ba311d067e53eb59c945b62c83575cb"><div class="ttname"><a href="qs__copy_8h.html#a4ba311d067e53eb59c945b62c83575cb">QS_F64</a></div><div class="ttdeci">#define QS_F64(width_, data_)</div><div class="ttdoc">Output formatted 64-bit floating point number to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00644">qs_copy.h:644</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a76d242e299411954043362240acd6a81"><div class="ttname"><a href="qs__copy_8h.html#a76d242e299411954043362240acd6a81">QS_F32</a></div><div class="ttdeci">#define QS_F32(width_, data_)</div><div class="ttdoc">Output formatted 32-bit floating point number to the QS record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00640">qs_copy.h:640</a></div></div>
</div><!-- fragment -->  </td><td><code>0991501750 FP_DATA 3.141500e+003 -2.7182818280e+005</code><br  />
NOTE: produced only when QS-ID <code>QS_AP_ID + 1</code> is enabled in the <a class="el" href="qs.html#qs_local">QS Local Filter</a>   </td></tr>
</table>
<h2><a class="anchor" id="qs_app_el"></a>
Application-Specific Data Elements</h2>
<p>The following table summarizes the supported data elements that can be used inside the Application-Specific trace records:</p>
<center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Data Element   </th><th class="markdownTableHeadNone">Example   </th><th class="markdownTableHeadNone">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab" title="Output formatted uint8_t to the QS record.">QS_U8()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a129128a3bb20d0b9286ff7c68f1401ab" title="Output formatted uint8_t to the QS record.">QS_U8(0, n)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>uint8_t</code> integer with format <code>"%u"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a0d9567f774207e262ceafde8e8069385" title="Output formatted int8_t to the QS record.">QS_I8()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a0d9567f774207e262ceafde8e8069385" title="Output formatted int8_t to the QS record.">QS_I8(3, m)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>int8_t</code> integer with format <code>"%3d"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a3b053b820c90aac6aa7e10adb76a18a5" title="Output formatted uint16_t to the QS record.">QS_U16()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a3b053b820c90aac6aa7e10adb76a18a5" title="Output formatted uint16_t to the QS record.">QS_U16(5, n)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>uint16_t</code> integer with format <code>"%5u"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa56a51195cc2819fb2612e3c24723bae" title="Output formatted int16_t to the QS record.">QS_I16()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#aa56a51195cc2819fb2612e3c24723bae" title="Output formatted int16_t to the QS record.">QS_I16(0, m)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>int16_t</code> integer with format <code>"%d"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a17e249417c7e49c8e2913b17696acbc0" title="Output formatted uint32_t to the QS record.">QS_U32()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a17e249417c7e49c8e2913b17696acbc0" title="Output formatted uint32_t to the QS record.">QS_U32(8, n)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>uint32_t</code> integer with format <code>"%8u"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa3e19e4d0d7a2075951ac5c3fe389936" title="Output formatted int32_t to the QS record.">QS_I32()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#aa3e19e4d0d7a2075951ac5c3fe389936" title="Output formatted int32_t to the QS record.">QS_I32(0, m)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>int32_t</code> integer with format <code>"%d"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">QS_U32_HEX()   </td><td class="markdownTableBodyNone"><code>QS_U32_HEX(8, h)</code>   </td><td class="markdownTableBodyNone">Outputs a <code>uint32_t</code> integer with format <code>"%8X"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa1ebd3ac35e153ead74106931bc58c08" title="Output formatted uint64_t to the QS record.">QS_U64()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a17e249417c7e49c8e2913b17696acbc0" title="Output formatted uint32_t to the QS record.">QS_U32(0, n)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a <code>uint32_t</code> integer with format <code>"%2"PRIi64</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a76d242e299411954043362240acd6a81" title="Output formatted 32-bit floating point number to the QS record.">QS_F32()</a>   </td><td class="markdownTableBodyNone"><code>QS_F32(0, 3.1415F);</code>   </td><td class="markdownTableBodyNone">Outputs a 32-bit <code>float</code> with format <code>"%7.0e"</code><br  />
 (zero digits after the comma)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a4ba311d067e53eb59c945b62c83575cb" title="Output formatted 64-bit floating point number to the QS record.">QS_F64()</a>   </td><td class="markdownTableBodyNone"><code>QS_F64(4, sqrt(2.0));</code>   </td><td class="markdownTableBodyNone">Outputs a 64-bit <code>double</code> with format <code>"%12.4e"</code> <br  />
 (4 digits after the comma)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a7ad67719163eea844e44bee7f0478c0a" title="Output formatted zero-terminated ASCII string to the QS record.">QS_STR()</a>   </td><td class="markdownTableBodyNone"><code>QS_STR("Hello")</code>   </td><td class="markdownTableBodyNone">Outputs a zero-terminated string with format <code>"%s"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a68d599cd42fd0fec8cca70251361d8cc" title="Output formatted memory block of up to 255 bytes to the QS record.">QS_MEM()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a68d599cd42fd0fec8cca70251361d8cc" title="Output formatted memory block of up to 255 bytes to the QS record.">QS_MEM(&amp;my_struct, 16)</a></code>   </td><td class="markdownTableBodyNone">Outputs 16 bytes of memory starting from <code>&amp;my_struct</code>.<br  />
 The bytes are output using the hex format <code>"%02X"</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b" title="Output formatted object pointer to the QS record.">QS_OBJ()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b" title="Output formatted object pointer to the QS record.">QS_OBJ(&amp;my_obj)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs an object pointer.<br  />
 If an object dictionary for the object exists,<br  />
 <a class="el" href="qspy.html">QSPY</a> will display the symbolic name of the object    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a9342913835bccef5ded5a59d2712101a" title="Output formatted function pointer to the QS record.">QS_FUN()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#a1b8d4d79089735ec19915ef7ed3e2e0b" title="Output formatted object pointer to the QS record.">QS_OBJ(&amp;foo)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a function pointer.<br  />
 If a function dictionary for the function exists,<br  />
 <a class="el" href="qspy.html">QSPY</a> will display the symbolic name of the function    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa4ef1e418c7b9680bf2242f6354490ee" title="Output formatted event signal (of type ::QSignal) and the state machine object to the user QS record.">QS_SIG()</a>   </td><td class="markdownTableBodyNone"><code><a class="el" href="qs__copy_8h.html#aa4ef1e418c7b9680bf2242f6354490ee" title="Output formatted event signal (of type ::QSignal) and the state machine object to the user QS record.">QS_SIG(TIMEOUT_SIG, (void*)0)</a>;</code>   </td><td class="markdownTableBodyNone">Outputs a signal.<br  />
 If siganl dictionary for the siganl exists,<br  />
 <a class="el" href="qspy.html">QSPY</a> will display the symbolic name of the signal   </td></tr>
</table>
</center><h1><a class="anchor" id="qs_filters"></a>
QS Filters</h1>
<p>Obviously, QS cannot eliminate completely the overhead of software tracing. But with the fine-granularity <b>filters</b> available in QS, you can make this impact as small as necessary. For greatest flexibility, QS uses two complementary levels of filters: <a class="el" href="qs.html#qs_global">Global Filter</a> and <a class="el" href="qs.html#qs_local">Local Filter</a> described below. Combination of such two complementary filtering criteria results in very selective tracing capabilities.</p>
<dl class="section note"><dt>Note</dt><dd>The Global and Local filters are initialized in the <a class="el" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921" title="Initialize the QS facility.">QS_INIT()</a> macro. Subsequently, the QP application can change the filters <b>at runtime</b> by means of the <a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER()</a> and <a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER()</a> macros. Also, if the QS receive channel is enabled (<a class="el" href="qs.html#qs_rx">QS-RX</a>), the filters can be changed from the <a class="el" href="qutest.html">QUTest</a> or <a class="el" href="qview.html">QView</a> front-ends.</dd></dl>
<h2><a class="anchor" id="qs_global"></a>
Global Filter</h2>
<p>The Global Filter is based on trace <a class="el" href="qpspy_proto.html">Record-Types</a> associated with each QS record (see <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5" title="Quantum Spy record types.">QSpyRecords</a>). This filter allows you to disable or enable each individual Record-Type or a whole group of QS records. For example, you might enable or disable <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a7c85a4b6d1432ad25b64da55a93aec16" title="a state was entered">QS_QEP_STATE_ENTRY</a> (entry to a state), <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a45fc411ce90440d9b00d956cf895f8cc" title="a state was exited">QS_QEP_STATE_EXIT</a> (exit from a state), <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a66ac875f67153c0831053be32dc2faa8" title="the top-most initial transition was taken">QS_QEP_INIT_TRAN</a> (state transition), <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5acde7735acd22b2c9a09e929581c19d39" title="an event was posted (FIFO) directly to AO">QS_QF_ACTIVE_POST</a> (event posting), <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2cee74edfbadce4bbd3982806b7efb48" title="an event was published">QS_QF_PUBLISH</a> (event publishing), and all other pre-defined and application-specific event types. This level works globally for all state machines, active objects, and time event objects in the entire system.</p>
<p>QS provides a simple interface <a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER()</a> for setting and clearing individual Record-Types as well as groups of Record-Types in the Target code. The following table summarizes the Record-Types and groups of Record-Types that you can use as arguments to <a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER()</a>.</p>
<p><br  />
</p><center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Record-Type<br  />
/Group   </th><th class="markdownTableHeadNone">Example   </th><th class="markdownTableHeadNone">Applies to QS Records    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">All Record-Types   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_ALL_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_ALL_RECORDS);   </td><td class="markdownTableBodyNone">all Record-Types    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">State<br  />
 Machine<br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_SM_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_SM_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a7c85a4b6d1432ad25b64da55a93aec16" title="a state was entered">QS_QEP_STATE_ENTRY</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a45fc411ce90440d9b00d956cf895f8cc" title="a state was exited">QS_QEP_STATE_EXIT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a18faac5d62d32f0a75dbf8e9c039c9a9" title="an initial transition was taken in a state">QS_QEP_STATE_INIT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a66ac875f67153c0831053be32dc2faa8" title="the top-most initial transition was taken">QS_QEP_INIT_TRAN</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a70183efaf8b7aee2102ba2593583b40e" title="an internal transition was taken">QS_QEP_INTERN_TRAN</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a8619ea7aad20ff2774d51f97db8e0ec7" title="a regular transition was taken">QS_QEP_TRAN</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adb7868fd595309968edb6bddcd24e493" title="an event was ignored (silently discarded)">QS_QEP_IGNORED</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a1ea8c291acd4bf3aaac1ff1568f59177" title="a tran to history was taken">QS_QEP_TRAN_HIST</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a44d8ac7f37ada4a6f0e9a0ca7ef6c9d6" title="a tran to entry point into a submachine">QS_QEP_TRAN_EP</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a7396212a48db1932f0bf1c44f87f4cad" title="a tran to exit point out of a submachine">QS_QEP_TRAN_XP</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Active<br  />
 Object<br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_AO_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_AO_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5afd565fd9560c5f1980bbfafba5757d3b" title="an AO subscribed to an event">QS_QF_ACTIVE_SUBSCRIBE</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9aef204a3cc92ef7358464936c25132d" title="an AO unsubscribed to an event">QS_QF_ACTIVE_UNSUBSCRIBE</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5acde7735acd22b2c9a09e929581c19d39" title="an event was posted (FIFO) directly to AO">QS_QF_ACTIVE_POST</a>, <br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a43cd4d7b4166bf8d650e8758a1730ab8" title="an event was posted (LIFO) directly to AO">QS_QF_ACTIVE_POST_LIFO</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a521f7cfd0bd622271933618986050803" title="AO got an event and its queue is not empty.">QS_QF_ACTIVE_GET</a>, <br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3d86ae6b74e255aa2460a2b7810479e" title="AO got an event and its queue is empty.">QS_QF_ACTIVE_GET_LAST</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Event<br  />
 Queue<br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_EQ_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_EQ_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3935bfaa5e22dd55c397b3f5327e0b4" title="an event was posted (FIFO) to a raw queue">QS_QF_EQUEUE_POST</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a79581157be624acd8e235d38bf982fe6" title="an event was posted (LIFO) to a raw queue">QS_QF_EQUEUE_POST_LIFO</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a884ddf0de4a65ff5e449f202a60bc134" title="get an event and queue still not empty">QS_QF_EQUEUE_GET</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a14afb7d966626dfed694d61edffc4cac" title="get the last event from the queue">QS_QF_EQUEUE_GET_LAST</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Memory<br  />
 Pool<br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_MP_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_MP_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a61c82b1714be13cb91871eafb9a51dd7" title="a memory block was removed from memory pool">QS_QF_MPOOL_GET</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4c82fd83734370b6a4f536e8abb363a5" title="a memory block was returned to memory pool">QS_QF_MPOOL_PUT</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Time<br  />
 Event <br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_TE_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_TE_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ad8eb4a56375cadd56963b580940429bf" title="a time event was armed">QS_QF_TIMEEVT_ARM</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a08af27f4ec39794b3d9f6c481b15c617" title="a time event expired and was disarmed">QS_QF_TIMEEVT_AUTO_DISARM</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6432a10cabc4d6849fbf18dbf9c1b457" title="attempt to disarm a disarmed QTimeEvt">QS_QF_TIMEEVT_DISARM_ATTEMPT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a166206ff01dabb9e8a1f90ebe84c99de" title="true disarming of an armed time event">QS_QF_TIMEEVT_DISARM</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2346cc6f9d474d64e1a814f1eb3a12c9" title="rearming of a time event">QS_QF_TIMEEVT_REARM</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5b533a17a8d64eeee427069e15aefd68" title="a time event posted itself directly to an AO">QS_QF_TIMEEVT_POST</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">QF Group<br  />
 Event<br  />
 Management   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_QF_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_QF_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adfe3bc0c4afd40b4e6da539605f8216e" title="new event was created">QS_QF_NEW</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a98bf159085064a8c12e9a64b225fa45b" title="an attempt to allocate an event failed">QS_QF_NEW_ATTEMPT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4a48aeb5f5cc56c184a29f161d403db4" title="garbage collection attempt">QS_QF_GC_ATTEMPT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a515fdabfa88153e12a3bbdbf5e8a4499" title="garbage collection">QS_QF_GC</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6432a10cabc4d6849fbf18dbf9c1b457" title="attempt to disarm a disarmed QTimeEvt">QS_QF_TIMEEVT_DISARM_ATTEMPT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a>,<br  />
    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Scheduler<br  />
 Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_SC_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_SC_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5aa4668d523e30062d9a52ffe62d020e0e" title="scheduler was locked">QS_SCHED_LOCK</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ab7321c5c4ede83a2ac7c42a6afd800d2" title="scheduler was unlocked">QS_SCHED_UNLOCK</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae8263f38846b22d476fa448012da51be" title="scheduler found next task to execute">QS_SCHED_NEXT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a77916ec8c26d52eff118780a5a1d686d" title="scheduler became idle">QS_SCHED_IDLE</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5afdaec5515c1cbe9265276ebf33d7fe7c" title="scheduler resumed previous task (not idle)">QS_SCHED_RESUME</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6432a10cabc4d6849fbf18dbf9c1b457" title="attempt to disarm a disarmed QTimeEvt">QS_QF_TIMEEVT_DISARM_ATTEMPT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a>,<br  />
    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User Group-0   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_U0_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_U0_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 0 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User Group-1   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_U1_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_U1_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 5 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 9    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User Group-2   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_U2_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_U2_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 10 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 14    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User Group-3   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_U3_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_U3_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 15 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 19    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">User Group-4   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_U4_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_U4_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 20 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 24    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">User-All@Group   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER(QS_UA_RECORDS)</a>;<br  />
 QS_GLB_FILTER(-QS_UA_RECORDS);   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 0 .. <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a48cec974671d01f280b2b1a33225d176" title="the first record available to QS users">QS_USER</a> + 24    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Non-Maskable</b>   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5acf04d6ddc44d6bb47a720c1a6bb4162f" title="signal dictionary entry">QS_SIG_DICT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5f687e318f1a2ceb58d765e1518b4f63" title="object dictionary entry">QS_OBJ_DICT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a23b9c25e8bc689a583cb177320970366" title="function dictionary entry">QS_FUN_DICT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5addefd81954c03794f4621e1633511c8e" title="user QS record dictionary entry">QS_USR_DICT</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6a73ed1da89600585ca91b5572941ea4" title="reports the Target information">QS_TARGET_INFO</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a46dd9236a26e6fc756707e0fd4c86f74" title="reports completion of a user callback">QS_TARGET_DONE</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ac5529da36a580b3f391539730e3c0ed2" title="QS record for cleanly starting a session.">QS_EMPTY</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ab2ccd183a19b0a8aa5b7b278df8240ac" title="test has been paused">QS_TEST_PAUSED</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a17606e6b88e4c904f71421368cf017ae" title="reports that Test-Probe has been used">QS_TEST_PROBE_GET</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a73ac7798c3a72e4754138f3436d2a3a1" title="reports QS data receive status">QS_RX_STATUS</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ad6bf3f7eceb7c0b063082d25f22ee994" title="reports the data from &quot;current object&quot; query">QS_QUERY_DATA</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5aecac2f03345ae0df0ba1421a5d3c8e8b" title="reports the data from the PEEK query">QS_PEEK_DATA</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a024157f7a402e0c0026e1c4dba1c7ce7" title="assertion failed in the code">QS_ASSERT_FAIL</a>,<br  />
 <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a0f0e239627aea4a7387f03c6e5178584" title="QF_run() was entered.">QS_QF_RUN</a>   </td></tr>
</table>
</center><p> <br  />
 </p><dl class="section attention"><dt>Attention</dt><dd>The QS Global Filter is initialized in the <a class="el" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921" title="Initialize the QS facility.">QS_INIT()</a> macro to <b>all OFF</b></dd></dl>
<p>Here are some examples of setting and clearing QS Global Filter with <a class="el" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0" title="Global Filter for a given record type rec.">QS_GLB_FILTER()</a>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (!<a class="code" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921">QS_INIT</a>(argv)) {         <span class="comment">/* Initialize QS target component */</span></div>
<div class="line">    <span class="keywordflow">return</span> -1;                <span class="comment">/* unable to initialize QSpy */</span></div>
<div class="line">}</div>
<div class="line">~ ~ ~</div>
<div class="line"><span class="comment">/* apply the QS Global Filter... */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0">QS_GLB_FILTER</a>(<a class="code" href="qs__copy_8h.html#a4811826c90b13a0b7137e0443e82d41cab0976d2f965e82da206cd61cb1381ec3">QS_QF_RECORDS</a>); <span class="comment">/* turn QF-group ON */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0">QS_GLB_FILTER</a>(-<a class="code" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd">QS_QF_TICK</a>);   <span class="comment">/* turn #QS_QF_TICK OFF */</span></div>
<div class="ttc" id="aqs__copy_8h_html_a4811826c90b13a0b7137e0443e82d41cab0976d2f965e82da206cd61cb1381ec3"><div class="ttname"><a href="qs__copy_8h.html#a4811826c90b13a0b7137e0443e82d41cab0976d2f965e82da206cd61cb1381ec3">QS_QF_RECORDS</a></div><div class="ttdeci">@ QS_QF_RECORDS</div><div class="ttdoc">QF QS records.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00207">qs_copy.h:207</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_aa42d8bbc70e6069f9c55d87f76ec15b0"><div class="ttname"><a href="qs__copy_8h.html#aa42d8bbc70e6069f9c55d87f76ec15b0">QS_GLB_FILTER</a></div><div class="ttdeci">#define QS_GLB_FILTER(rec_)</div><div class="ttdoc">Global Filter for a given record type rec.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00454">qs_copy.h:454</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd"><div class="ttname"><a href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd">QS_QF_TICK</a></div><div class="ttdeci">@ QS_QF_TICK</div><div class="ttdoc">QF_tickX() was called.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00107">qs_copy.h:107</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_af22371611fe57862a37eb785debb7921"><div class="ttname"><a href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921">QS_INIT</a></div><div class="ttdeci">#define QS_INIT(arg_)</div><div class="ttdoc">Initialize the QS facility.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00424">qs_copy.h:424</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="qs_local"></a>
Local Filter</h2>
<p>The Local Filter is based on <b>QS-IDs</b> associated with various objects in the Target memory. The <b>QS-IDs</b> are small integer numbers, such as the unique <b>priorities</b> assigned to QP Active Objects, but there are more such QS-IDs, which <em>you</em> can assign to various objects. Then, you can setup the QS Local Filter to trace only a specific groups of such QS-IDs.</p>
<p>The main use case for QS Local Filter is an application, where certain active objects are very "noisy", and would overwhelm your trace. The QS Local Filter allows you to silence the "noisy" active objects and let the others through.</p>
<p>Please note that the <a class="el" href="qs.html#qs_global">QS Global Filter</a> will not do the trick, because you don't want to suppress all QS records of a given Record-Type. Instead, you want to suppress only <b>specific objects</b>.</p>
<p>QS provides a simple interface <a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER()</a> for setting and clearing individual QS-IDs as well as groups of QS-IDs in the Target code. The following table summarizes the QS-IDs and groups of QS_IDs that you can use as arguments to <a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER()</a>.</p>
<center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">QS-ID<br  />
 /Group   </th><th class="markdownTableHeadNone">Range   </th><th class="markdownTableHeadNone">Example   </th><th class="markdownTableHeadNone">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">always enabled    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610a52a0554f6fd51c916a5910b97564f0c4" title="AO IDs (priorities)">QS_AO_IDS</a>   </td><td class="markdownTableBodyNone">1..64   </td><td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER(QS_AO_IDS)</a>;<br  />
 QS_LOC_FILTER(-QS_AO_IDS);<br  />
 <a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER(6)</a>;<br  />
 QS_LOC_FILTER(-6);<br  />
 QS_LOC_FILTER(AO_Table-&gt;prio)   </td><td class="markdownTableBodyNone">Active Object priorities    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610a474073b119a9ca60c9da57f43589c447" title="event-pool IDs">QS_EP_IDS</a><br  />
   </td><td class="markdownTableBodyNone">65..80<br  />
   </td><td class="markdownTableBodyNone">QS_LOC_FILTER(QS_EP_ID + 1U);   </td><td class="markdownTableBodyNone">enable Event-Pool #1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610ac7cbc930c3ccaf3c9bbfe54e0f6e77a2" title="event-queue IDs">QS_EQ_IDS</a>   </td><td class="markdownTableBodyNone">81..96   </td><td class="markdownTableBodyNone">QS_LOC_FILTER(QS_EQ_ID + 1U);   </td><td class="markdownTableBodyNone">enable Event-Queue #1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610affd664a269b896f9876cf1a596cc93bd" title="Application-specific IDs.">QS_AP_IDS</a>   </td><td class="markdownTableBodyNone">97..127   </td><td class="markdownTableBodyNone">QS_LOC_FILTER(QS_AP_ID + 1U);   </td><td class="markdownTableBodyNone">enable Application Specific QS_ID   </td></tr>
</table>
</center><p> <br  />
 </p><dl class="section attention"><dt>Attention</dt><dd>The QS Local Filter is initialized in the <a class="el" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921" title="Initialize the QS facility.">QS_INIT()</a> macro to <b>all ON</b></dd></dl>
<p>Here are some examples of setting and clearing QS Local Filter with <a class="el" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107" title="Local Filter for a given object-id qs_id.">QS_LOC_FILTER()</a>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (!<a class="code" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921">QS_INIT</a>(argv)) {         <span class="comment">/* Initialize QS target component */</span></div>
<div class="line">    <span class="keywordflow">return</span> -1;                <span class="comment">/* unable to initialize QSpy */</span></div>
<div class="line">}</div>
<div class="line">~ ~ ~</div>
<div class="line"><span class="comment">/* apply the QS Local Filter... */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107">QS_LOC_FILTER</a>(-<a class="code" href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610a474073b119a9ca60c9da57f43589c447">QS_EP_IDS</a>);    <span class="comment">/* turn EP (Event-Pool) group  OFF */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107">QS_LOC_FILTER</a>(3);             <span class="comment">/* turn AO with prioity 3 ON */</span></div>
<div class="line"><a class="code" href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107">QS_LOC_FILTER</a>(AO_Table-&gt;prio); <span class="comment">/* turn AO_Table ON */</span></div>
<div class="ttc" id="aqs__copy_8h_html_a06c87e154257122417b40cf3d2dd7107"><div class="ttname"><a href="qs__copy_8h.html#a06c87e154257122417b40cf3d2dd7107">QS_LOC_FILTER</a></div><div class="ttdeci">#define QS_LOC_FILTER(qs_id_)</div><div class="ttdoc">Local Filter for a given object-id qs_id.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00465">qs_copy.h:465</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_afe956110f549396dacc2cea4fa4ee610a474073b119a9ca60c9da57f43589c447"><div class="ttname"><a href="qs__copy_8h.html#afe956110f549396dacc2cea4fa4ee610a474073b119a9ca60c9da57f43589c447">QS_EP_IDS</a></div><div class="ttdeci">@ QS_EP_IDS</div><div class="ttdoc">event-pool IDs</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00238">qs_copy.h:238</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="qs_curr"></a>
Current Objects</h1>
<p>QS maintains a set of <b>Current Objects</b>, to which it applies commands received through the <a class="el" href="qs.html#qs_rx">QS-RX channel</a>. For example, the event-post operation is applied to the current Active Object, while the peek/poke/fill operations are applied to the current Application Object. QS maintains the following Current Objects:</p><ul>
<li><a class="el" href="qs__copy_8h.html#a9b8dd526981a12bd2b68f97486dd040ca3ee4a3be50e7ffe79821a8c015afaff7" title="state machine object">SM_OBJ</a> - State Machine object</li>
<li><a class="el" href="qs__copy_8h.html#a9b8dd526981a12bd2b68f97486dd040ca53bfe83021ba7c286868dcd10c47f0b3" title="active object">AO_OBJ</a> - Active Object object</li>
<li><a class="el" href="qs__copy_8h.html#a9b8dd526981a12bd2b68f97486dd040caf790ae1a8fbb442f8ec743d6c5926384" title="event pool object">MP_OBJ</a> - Memory Pool object</li>
<li><a class="el" href="qs__copy_8h.html#a9b8dd526981a12bd2b68f97486dd040ca46c7afeaecf564cb105df44157e3e372" title="raw queue object">EQ_OBJ</a> - Event Queue object</li>
<li><a class="el" href="qs__copy_8h.html#a9b8dd526981a12bd2b68f97486dd040ca98e19f9d33a897e387a511cf62deb28f" title="time event object">TE_OBJ</a> - Time Event object</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Current Objects can be set only by sending commands to the <a class="el" href="qs.html#qs_rx">QS-RX receive channel</a>.</dd></dl>
<h1><a class="anchor" id="qs_dict"></a>
QS Dictionaries</h1>
<p>By the time you compile and load your application image to the Target, the symbolic names of various objects, function names, and event signal names are stripped from the code. Therefore, if you want to have the symbolic information available to the <a class="el" href="qspy.html">QSPY</a> host-resident component, you need to supply it somehow to the software tracing system.</p>
<p>The QS Target-resident component provides special <b>dictionary trace records</b> designed expressly for providing the symbolic information about the target code in the trace itself. These "dictionary records" are very much like the symbolic information embedded in the object files for the traditional single-step debugger. QS can supply four types of dictionary trace records:</p>
<ul>
<li>object dictionary ( <a class="el" href="qs__copy_8h.html#a034206ff7f20a4e6426a5f554434643b" title="Output object dictionary record.">QS_OBJ_DICTIONARY()</a> )</li>
<li>function dictionary ( <a class="el" href="qs__copy_8h.html#a3b1ab21c174f2bec448edec8865a8529" title="Output function dictionary record.">QS_FUN_DICTIONARY()</a> )</li>
<li>signal dictionary ( <a class="el" href="qs__copy_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b" title="Output signal dictionary record.">QS_SIG_DICTIONARY()</a> )</li>
<li>user dictionary ( <a class="el" href="qs__copy_8h.html#ae75893daa66c6d0b5a6dfb8f3fca1196" title="Output user QS-record dictionary record.">QS_USR_DICTIONARY()</a> )</li>
</ul>
<p>The dictionary trace records are typically generated during the system initialization and this is the only time when they are sent to the <a class="el" href="qspy.html">QSPY</a> host component. It is <b>your</b> responsibility to code them in (by means of the <code>QS_???_DICTIONARY()</code> macros). The following code snippet provides some examples of generating QS dictionaries:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="namespaceqview.html#a0ac274e7bffb2a1b29949100cd43ca35">main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    ~ ~ ~</div>
<div class="line">    if (!<a class="code" href="qs__copy_8h.html#af22371611fe57862a37eb785debb7921">QS_INIT</a>(argv)) {         <span class="comment">/* Initialize QS target component */</span></div>
<div class="line">        <span class="keywordflow">return</span> -1;                <span class="comment">/* unable to initialize QSpy */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* dictionaries... */</span></div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a034206ff7f20a4e6426a5f554434643b">QS_OBJ_DICTIONARY</a>(&amp;myObject);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a034206ff7f20a4e6426a5f554434643b">QS_OBJ_DICTIONARY</a>(AO_Table);  <span class="comment">/* opaque pointer */</span></div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a>(&amp;myFun);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY</a>(TIMEOUT_SIG, (<span class="keywordtype">void</span>*)0);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="qs__copy_8h.html#ae75893daa66c6d0b5a6dfb8f3fca1196">QS_USR_DICTIONARY</a>(ON_TEST_SETUP);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#ae75893daa66c6d0b5a6dfb8f3fca1196">QS_USR_DICTIONARY</a>(ON_TEST_TEARDOWN);</div>
<div class="line">    <a class="code" href="qs__copy_8h.html#ae75893daa66c6d0b5a6dfb8f3fca1196">QS_USR_DICTIONARY</a>(COMMAND_X);</div>
<div class="line">    ~ ~ ~</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceqview_html_a0ac274e7bffb2a1b29949100cd43ca35"><div class="ttname"><a href="namespaceqview.html#a0ac274e7bffb2a1b29949100cd43ca35">qview.main</a></div><div class="ttdeci">def main()</div><div class="ttdef"><b>Definition:</b> <a href="qview_8py_source.html#l01832">qview.py:1832</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a034206ff7f20a4e6426a5f554434643b"><div class="ttname"><a href="qs__copy_8h.html#a034206ff7f20a4e6426a5f554434643b">QS_OBJ_DICTIONARY</a></div><div class="ttdeci">#define QS_OBJ_DICTIONARY(obj_)</div><div class="ttdoc">Output object dictionary record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00779">qs_copy.h:779</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a3b1ab21c174f2bec448edec8865a8529"><div class="ttname"><a href="qs__copy_8h.html#a3b1ab21c174f2bec448edec8865a8529">QS_FUN_DICTIONARY</a></div><div class="ttdeci">#define QS_FUN_DICTIONARY(fun_)</div><div class="ttdoc">Output function dictionary record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00795">qs_copy.h:795</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_a9a8e26a01678f160bf35fd0bda6bfe8b"><div class="ttname"><a href="qs__copy_8h.html#a9a8e26a01678f160bf35fd0bda6bfe8b">QS_SIG_DICTIONARY</a></div><div class="ttdeci">#define QS_SIG_DICTIONARY(sig_, obj_)</div><div class="ttdoc">Output signal dictionary record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00762">qs_copy.h:762</a></div></div>
<div class="ttc" id="aqs__copy_8h_html_ae75893daa66c6d0b5a6dfb8f3fca1196"><div class="ttname"><a href="qs__copy_8h.html#ae75893daa66c6d0b5a6dfb8f3fca1196">QS_USR_DICTIONARY</a></div><div class="ttdeci">#define QS_USR_DICTIONARY(rec_)</div><div class="ttdoc">Output user QS-record dictionary record.</div><div class="ttdef"><b>Definition:</b> <a href="qs__copy_8h_source.html#l00804">qs_copy.h:804</a></div></div>
</div><!-- fragment --><p> <br  />
 </p><dl class="section remark"><dt>Remarks</dt><dd>The dictionary trace records are not absolutely required to generate the human-readable output, in the same way as the symbolic information in the object files is not absolutely required to debug your code. However, in both cases, the availability of the symbolic information greatly improves the productivity in working with the software trace or the debugger.</dd></dl>
<h1><a class="anchor" id="qs_rx"></a>
QS-RX Receive-Channel</h1>
<p>The QS target component contains the receive-channel (QS-RX), which can receive data from the <a class="el" href="qspy.html">QSPY</a> host application. The QS-RX channel provides the following services:</p><ul>
<li>Remotely reset of the Target</li>
<li>Request target information (version, all sizes of objects, build time-stamp)</li>
<li>Execute a user-defined command inside the Target with arguments supplied from <a class="el" href="qspy.html">QSPY</a></li>
<li>Inject an arbitrary event to the Target (dispatch, post or publish)</li>
<li>Set <a class="el" href="qs.html#qs_global">QS Global Filter</a> inside the Target</li>
<li>Set <a class="el" href="qs.html#qs_local">QS Local Filter</a> inside the Target</li>
<li>Set <a class="el" href="qs.html#qs_curr">current QS object</a> inside the Target</li>
<li>Peek data inside the Target and send to <a class="el" href="qspy.html">QSPY</a></li>
<li>Poke data (supplied from <a class="el" href="qspy.html">QSPY</a>) into the Target</li>
<li>Fill specified memory area in the Target with bit pattern supplied from <a class="el" href="qspy.html">QSPY</a></li>
<li>Execute clock tick inside the Target</li>
<li>Execute test setup inside the Target</li>
<li>Execute test teardown inside the Target</li>
<li>Store a <a class="el" href="qutest_fixture.html#qutest_fixture-probe">Test Probe</a> supplied from <a class="el" href="qspy.html">QSPY</a> inside the Target</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The QS-RX channel is the backbone for interacting with the target system and implemeting such features as <a class="el" href="qutest.html">Unit Testing</a> and <a class="el" href="qview.html">Visualization/Monitoring</a> of the target system.</dd></dl>
<hr  />
<p><b>Next:</b> <a class="el" href="qspy.html">QSPY Host Application</a></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
      <ul>
        <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2021 Quantum Leaps</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.9.3</b>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.9.3</b>
</small></address>
        </li>
      </ul>
    </div>
    <script src="custom.js"></script>
  </body>
</html>
