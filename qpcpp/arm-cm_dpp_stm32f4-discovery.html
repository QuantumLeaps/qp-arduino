<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C++: DPP on STM32F4-Discovery</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">
    <img id="logo" src="img/logo_ql.png" alt="Quantum Leaps">
  </a>
  <span id="projectname">QP/C++</span>
  <span id="projectnumber">6.9.3</span>
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('arm-cm_dpp_stm32f4-discovery.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DPP on STM32F4-Discovery </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="dpp.html">DPP example</a> for STM32F4-Discovery board is located directory <span class="img folder">examples/arm-cm/dpp_stm32f4-discovery</span>.</p>
<div class="image">
<img src="bd_STM32F4-Discovery.jpg" alt=""/>
<div class="caption">
STM32F4-Discovery board</div></div>
<p>Demonstrated built-in kernels:</p><ul>
<li>cooperative <a class="el" href="group__qv.html">QV</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
<li>preemptive, run-to-completion <a class="el" href="group__qk.html">QK</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
<li>dual-mode (run-to-completion/blocking) <a class="el" href="group__qxk.html">QXK</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
</ul>
<p>Features:</p><ul>
<li>multiple active objects, including 5 instances of the same AO class (Philo)</li>
<li>extended threads (the <a class="el" href="class_q_p_1_1_q_x_k.html" title="QXK services.">QXK</a> version)</li>
<li><a href="https://www.state-machine.com/qtools/qpspy.html">QP/Spy software tracing</a> using the virtual COM-port</li>
<li>bi-directional <a href="https://www.state-machine.com/qtools/qs.html#qs_rx">QP/Spy</a> (sending commands to the target)</li>
</ul>
<p>After you load the DPP example into the STM32F4-Discovery board, the application should start blinking the 4 on-board LEDs. You can press the User button (blue) to PAUSE the philosophers for as long as the button is depressed. The philosophers resume dining when you release the User button. (In the PAUSED state the Table active object stops granting permissions to eat, so eventually all philosophers end in the "hungry" state.)</p>
<h1><a class="anchor" id="arm-cm_dpp_stm32f4-discovery_qs"></a>
QS Software Tracing</h1>
<p>The DPP example for embOS on STM32F4-Discovery board provides the "Spy" build configuration, which outputs the <a class="el" href="class_q_p_1_1_q_s.html" title="QS logging facilities.">QS</a> (Quantum Spy) software tracing data through USART2. To get the data out of the board, you need to connect the TTL/RS232 converter as follows:</p>
<center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">STM32F4-Discovery   </th><th class="markdownTableHeadLeft">TTL/RS232 Converter    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA2   </td><td class="markdownTableBodyLeft">TX    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA3   </td><td class="markdownTableBodyLeft">RX (currently not used)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VDD   </td><td class="markdownTableBodyLeft">VCC    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyLeft">GND   </td></tr>
</table>
</center><div class="image">
<img src="bd_STM32F4-Discovery_RS232.jpg" alt=""/>
<div class="caption">
STM32F4-Discovery board connected to RS232 level shifter</div></div>
<p>The output is generated at 115200 baud rate.</p>
<p>Here is an example invocation of the QSPY host application to receive the <a class="el" href="class_q_p_1_1_q_s.html" title="QS logging facilities.">QS</a> data from STM32F4-Discovery:</p>
<pre class="fragment">qspy -cCOM1
</pre><p>The actual COM port number might be different on your Windows machine. Please check the Device Manager to find the COM port number.</p>
<hr  />
<p><b>Next:</b> <a class="el" href="arm-cm_dpp_stm32f746g-disco.html">DPP on STM32F746G-Discovery</a></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
      <ul>
        <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2021 Quantum Leaps</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QP/C++ 6.9.3</b>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QP/C++ 6.9.3</b>
</small></address>
        </li>
      </ul>
    </div>
    <script src="custom.js"></script>
  </body>
</html>
