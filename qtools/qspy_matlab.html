<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QTools: QSPY MATLAB Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">
    <img id="logo" src="img/logo_ql.png" alt="Quantum Leaps">
  </a>
  <span id="projectname">QTools</span>
  <span id="projectnumber">6.9.3</span>
           <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)"
               onblur="searchBox.OnSearchFieldFocus(false)"
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('qspy_matlab.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0"
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QSPY MATLAB Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#MATLAB_Q_STATE">Q_STATE Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_ACTIVE">Q_ACTIVE Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_EQUEUE">Q_EQUEUE Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_MPOOL">Q_MPOOL Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_NEW">Q_NEW Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_PUB">Q_PUB Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_TIME">Q_TIME Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_INT">Q_INT Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_ISR">Q_ISR Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_MUTEX">Q_MUTEX Matrix</a></li>
<li class="level1"><a href="#MATLAB_Q_SCHED">Q_SCHED Matrix</a></li>
</ul>
</div>
<div class="textblock"><p>The QSPY host application can also export trace data to <a href="http://www.mathworks.com/products/matlab/" target="_blank" class="extern">MATLAB</a>&reg;, which is a popular numerical computing environment and a high-level technical programming language. Created by The MathWorks, Inc., MATLAB allows easy manipulation and plotting of data represented as matrices. </p>
<dl class="section note"><dt>Note</dt><dd>The QSPY MATLAB interface is also compatible with the <a href="http://www.gnu.org/software/octave/" target="_blank" class="extern">GNU Octave</a> environment, which is an open source alternative to MATLAB and is compatible with the QSPY MATLAB interface described below.</dd></dl>
<p>The following sections provide a reference manual for all 11 the MATLAB matrices generated by the <code>qspy.m</code> script. By MATLAB convention, the different variables are put into columns, allowing observations to vary down through the rows. Therefore, a data set consisting of twenty four time samples of six variables is stored in a matrix of size 24-by-6. The pound sign '#' in a given cell of the matrix represents data available from the target. Other values, represent data added by the <code>qspy.m</code> script to allow unambiguous identification of the trace records.</p>
<ul>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_STATE">Q_STATE Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_ACTIVE">Q_ACTIVE Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_EQUEUE">Q_EQUEUE Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_MPOOL">Q_MPOOL Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_NEW">Q_NEW Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_PUB">Q_PUB Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_TIME">Q_TIME Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_INT">Q_INT Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_ISR">Q_ISR Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_MUTEX">Q_MUTEX Matrix</a></li>
<li><a class="el" href="qspy_matlab.html#MATLAB_Q_SCHED">Q_SCHED Matrix</a></li>
</ul>
<h1><a class="anchor" id="MATLAB_Q_STATE"></a>
Q_STATE Matrix</h1>
<p>The N-by-6 <code>Q_STATE</code> matrix stores all QS records generated by the QEP hierarchical event processor and pertaining to all the state machines in the system. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_STATE Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><b>5</b> </td><td><p class="starttd"><b>6</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Signal</b> </td><td><b>State<br  />
 Machine<br  />
 Object</b> </td><td><b>Source<br  />
 State</b> </td><td><b>New<br  />
 State</b> </td><td><p class="starttd"><b>Event<br  />
 Hanlder</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a7c85a4b6d1432ad25b64da55a93aec16" title="a state was entered">QS_QEP_STATE_ENTRY</a></code>  </td><td>NaN </td><td>1 </td><td>#(2) </td><td># </td><td>NaN </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a45fc411ce90440d9b00d956cf895f8cc" title="a state was exited">QS_QEP_STATE_EXIT</a></code>  </td><td>NaN </td><td>2 </td><td>#(2) </td><td># </td><td>NaN </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a18faac5d62d32f0a75dbf8e9c039c9a9" title="an initial transition was taken in a state">QS_QEP_STATE_INIT</a></code>  </td><td>NaN </td><td>3 </td><td># </td><td># </td><td># </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a66ac875f67153c0831053be32dc2faa8" title="the top-most initial transition was taken">QS_QEP_INIT_TRAN</a></code>  </td><td># </td><td>3 </td><td>#(2) </td><td>NaN </td><td># </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a70183efaf8b7aee2102ba2593583b40e" title="an internal transition was taken">QS_QEP_INTERN_TRAN</a></code>  </td><td># </td><td>#(1) </td><td>#(2) </td><td># </td><td>NaN </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a8619ea7aad20ff2774d51f97db8e0ec7" title="a regular transition was taken">QS_QEP_TRAN</a></code>  </td><td># </td><td>#(1) </td><td>#(2) </td><td># </td><td># </td><td><p class="starttd">1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adb7868fd595309968edb6bddcd24e493" title="an event was ignored (silently discarded)">QS_QEP_IGNORED</a></code>  </td><td># </td><td>#(1) </td><td>#(2) </td><td># </td><td>NaN </td><td><p class="starttd">0 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9bf65aa3061ba23bb1533fb4f2e75dbb" title="an event was dispatched (begin of RTC step)">QS_QEP_DISPATCH</a></code>  </td><td># </td><td>#(1) </td><td>#(2) </td><td># </td><td>NaN </td><td><p class="starttd">0 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a83ab8a12e2cb2dae6283aca400cf0a8d" title="an event was unhandled due to a guard">QS_QEP_UNHANDLED</a></code>  </td><td>NaN </td><td>#(1) </td><td>#(2) </td><td># </td><td>NaN </td><td>0  </td></tr>
</table>
<p>(1) The valid USER signal is &gt; 3</p>
<p>(2) Per inheritance, an active object is a state machine object as well</p>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_STATE</code> matrix:</p>
<table summary="Q_STATE records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a7c85a4b6d1432ad25b64da55a93aec16" title="a state was entered">QS_QEP_STATE_ENTRY</a></code>  </td><td><p class="starttd"><code>Q_STATE(:,2) == 1</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a45fc411ce90440d9b00d956cf895f8cc" title="a state was exited">QS_QEP_STATE_EXIT</a></code>  </td><td><p class="starttd"><code>Q_STATE(:,2) == 2</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a18faac5d62d32f0a75dbf8e9c039c9a9" title="an initial transition was taken in a state">QS_QEP_STATE_INIT</a></code>  </td><td><p class="starttd"><code>Q_STATE(:,2) == 3</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a66ac875f67153c0831053be32dc2faa8" title="the top-most initial transition was taken">QS_QEP_INIT_TRAN</a></code>  </td><td><p class="starttd"><code>isnan(Q_STATE(:,4))</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a70183efaf8b7aee2102ba2593583b40e" title="an internal transition was taken">QS_QEP_INTERN_TRAN</a></code>  </td><td><p class="starttd"><code>Q_STATE(:,2) &gt; 3 &amp; isnan(Q_STATE(:,5))</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a8619ea7aad20ff2774d51f97db8e0ec7" title="a regular transition was taken">QS_QEP_TRAN</a></code>  </td><td><p class="starttd"><code>Q_STATE(:,2) &gt; &gt; &amp; ~isnan(Q_STATE(:,5))</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adb7868fd595309968edb6bddcd24e493" title="an event was ignored (silently discarded)">QS_QEP_IGNORED</a></code>  </td><td><p class="starttd"><code>~Q_STATE(:,6)</code> </p>
<p class="endtd"></p>
</td></tr>
</table>
<p>For example, the following MATLAB plot shows the timing diagrams for all Philo state machines in the DPP example application made by the <code>philo_timing.m</code> script located in the directory <code>qtools/qspy/matlab</code> (see Section qspy_files). The vertical axis represents states "thinking" (lowest), "hungry" (middle) and "eating" (top) states.</p>
<div class="image">
<img src="FigQSPY.01.jpg" alt=""/>
<div class="caption">
Timing diagrams for all Philo state machines.</div></div>
<h1><a class="anchor" id="MATLAB_Q_ACTIVE"></a>
Q_ACTIVE Matrix</h1>
<p>The N-by-5 <code>Q_ACTIVE</code> matrix stores QS records pertaining to adding/removing active objects and subscribing/unsubscribing to events from active objects. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_ACTIVE Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><p class="starttd"><b>5</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Signal</b> </td><td><b>Active<br  />
 Object</b> </td><td><b>QF<br  />
 Priority</b> </td><td><p class="starttd"><b>Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5afd565fd9560c5f1980bbfafba5757d3b" title="an AO subscribed to an event">QS_QF_ACTIVE_SUBSCRIBE</a></code>  </td><td># </td><td># </td><td># </td><td>NaN </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9aef204a3cc92ef7358464936c25132d" title="an AO unsubscribed to an event">QS_QF_ACTIVE_UNSUBSCRIBE</a></code>  </td><td># </td><td># </td><td># </td><td>NaN </td><td>-1  </td></tr>
</table>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_ACTIVE</code> matrix:</p>
<table summary="Q_ACTIVE records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5afd565fd9560c5f1980bbfafba5757d3b" title="an AO subscribed to an event">QS_QF_ACTIVE_SUBSCRIBE</a></code>  </td><td><p class="starttd"><code>isnan(Q_ACTIVE(:,4)) &amp; Q_ACTIVE(:,5) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9aef204a3cc92ef7358464936c25132d" title="an AO unsubscribed to an event">QS_QF_ACTIVE_UNSUBSCRIBE</a></code>  </td><td><code>isnan(Q_ACTIVE(:,4)) &amp; Q_ACTIVE(:,5) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_EQUEUE"></a>
Q_EQUEUE Matrix</h1>
<p>The N-by-10 <code>Q_EQUEUE</code> matrix stores QS records pertaining to queuing events in the QF. Both the active object event queues and the "raw" thread-safe queues are included. The 'nUsed' field denotes the current number of used entries in the queue. The 'Maximum nUsed' filed denotes the maximum number of used entries since initialization (high watermark). Both fields contain the number of used entries in the queues ring-buffer plus one, to account for the extra location at the front of the queue. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_EQUEUE Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><b>5</b> </td><td><b>6</b> </td><td><b>7</b> </td><td><b>8</b> </td><td><b>9</b> </td><td><p class="starttd"><b>10</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Sender</b> </td><td><b>Event<br  />
 Queue (1)</b> </td><td><b>nFree</b> </td><td><b>Minimum<br  />
 Used</b> </td><td><b>Signal</b> </td><td><b>Pool ID</b> </td><td><b>Ref.<br  />
 Count</b> </td><td><b>LIFO</b> </td><td><p class="starttd"><b>Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5acde7735acd22b2c9a09e929581c19d39" title="an event was posted (FIFO) directly to AO">QS_QF_ACTIVE_POST</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td>0 </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a43cd4d7b4166bf8d650e8758a1730ab8" title="an event was posted (LIFO) directly to AO">QS_QF_ACTIVE_POST_LIFO</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td>1 </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a521f7cfd0bd622271933618986050803" title="AO got an event and its queue is not empty.">QS_QF_ACTIVE_GET</a></code>  </td><td># </td><td>NaN </td><td># </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td>0 </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3d86ae6b74e255aa2460a2b7810479e" title="AO got an event and its queue is empty.">QS_QF_ACTIVE_GET_LAST</a></code>  </td><td># </td><td>NaN </td><td># </td><td>NaN </td><td>NaN </td><td># </td><td># </td><td># </td><td>0 </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3935bfaa5e22dd55c397b3f5327e0b4" title="an event was posted (FIFO) to a raw queue">QS_QF_EQUEUE_POST</a></code>  </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td># </td><td>1 </td><td># </td><td>0 </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a79581157be624acd8e235d38bf982fe6" title="an event was posted (LIFO) to a raw queue">QS_QF_EQUEUE_POST_LIFO</a></code>  </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td>1 </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a884ddf0de4a65ff5e449f202a60bc134" title="get an event and queue still not empty">QS_QF_EQUEUE_GET</a></code>  </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td># </td><td># </td><td># </td><td>0 </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a14afb7d966626dfed694d61edffc4cac" title="get the last event from the queue">QS_QF_EQUEUE_GET_LAST</a></code>  </td><td># </td><td>NaN </td><td># </td><td>NaN </td><td>NaN </td><td># </td><td># </td><td># </td><td>0 </td><td>-1  </td></tr>
</table>
<p>(1) This field (index 3) is actually the pointer to the ring buffer of the queue.</p>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_EQUEUE</code> matrix:</p>
<table summary="Q_EQUEUE records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5acde7735acd22b2c9a09e929581c19d39" title="an event was posted (FIFO) directly to AO">QS_QF_ACTIVE_POST</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;active obj&gt; &amp; ~Q_EQUEUE(:,9) &amp; Q_EQUEUE(:,10) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a43cd4d7b4166bf8d650e8758a1730ab8" title="an event was posted (LIFO) directly to AO">QS_QF_ACTIVE_POST_LIFO</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;active obj&gt; &amp; Q_EQUEUE(:,9) &amp; Q_EQUEUE(:,10) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a521f7cfd0bd622271933618986050803" title="AO got an event and its queue is not empty.">QS_QF_ACTIVE_GET</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;active obj&gt; &amp; ~isnan(Q_EQUEUE(:,4) &amp; Q_EQUEUE(:,10) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3d86ae6b74e255aa2460a2b7810479e" title="AO got an event and its queue is empty.">QS_QF_ACTIVE_GET_LAST</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;active obj&gt; &amp; isnan(Q_EQUEUE(:,4) &amp; Q_EQUEUE(:,10) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae3935bfaa5e22dd55c397b3f5327e0b4" title="an event was posted (FIFO) to a raw queue">QS_QF_EQUEUE_POST</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;raw queue&gt; &amp; ~Q_EQUEUE(:,9) &amp; Q_EQUEUE(:,10) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a79581157be624acd8e235d38bf982fe6" title="an event was posted (LIFO) to a raw queue">QS_QF_EQUEUE_POST_LIFO</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;raw queue&gt; &amp; Q_EQUEUE(:,9) &amp; Q_EQUEUE(:,10) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a884ddf0de4a65ff5e449f202a60bc134" title="get an event and queue still not empty">QS_QF_EQUEUE_GET</a></code>  </td><td><p class="starttd"><code>Q_EQUEUE(:,3) == &lt;raw queue&gt; &amp; ~isnan(Q_EQUEUE(:,4) &amp; Q_EQUEUE(:,10) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a14afb7d966626dfed694d61edffc4cac" title="get the last event from the queue">QS_QF_EQUEUE_GET_LAST</a></code>  </td><td><code>Q_EQUEUE(:,3) == &lt;raw queue&gt; &amp; isnan(Q_EQUEUE(:,4) &amp; Q_EQUEUE(:,10) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_MPOOL"></a>
Q_MPOOL Matrix</h1>
<p>The N-by-5 <code>Q_MPOOL</code> matrix stores QS records pertaining to memory pools in the QF. The 'nFree' field denotes the current number of free blocks in the event pool. The 'Minimum nFree' filed denotes the minimal number of free blocks since initialization (low watermark). The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_MPOOL Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><p class="starttd"><b>5</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Pool<br  />
 Object</b> </td><td><b>nFree</b> </td><td><b>Minimal<br  />
 nFree</b> </td><td><p class="starttd"><b>Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a61c82b1714be13cb91871eafb9a51dd7" title="a memory block was removed from memory pool">QS_QF_MPOOL_GET</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4c82fd83734370b6a4f536e8abb363a5" title="a memory block was returned to memory pool">QS_QF_MPOOL_PUT</a></code>  </td><td># </td><td># </td><td># </td><td>NaN </td><td>+1  </td></tr>
</table>
<p>The cumulative sum over the 'Delta' column should not have any long-time trends, because this would indicate a leak from the pool. The following picture shows the plot for the test data.</p>
<div class="image">
<img src="FigQSPY.02.jpg" alt=""/>
<div class="caption">
Plot stairs(Q_MPOOL(:,1), cumsum(Q_MPOOL(:,5)))</div></div>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_MPOOL</code> matrix:</p>
<table summary="Q_MPOOL records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a61c82b1714be13cb91871eafb9a51dd7" title="a memory block was removed from memory pool">QS_QF_MPOOL_GET</a></code>  </td><td><p class="starttd"><code>Q_MPOOL(:,5) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4c82fd83734370b6a4f536e8abb363a5" title="a memory block was returned to memory pool">QS_QF_MPOOL_PUT</a></code>  </td><td><code>Q_MPOOL(:,5) &gt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_NEW"></a>
Q_NEW Matrix</h1>
<p>The N-by-6 <code>Q_NEW</code> matrix stores QS records pertaining to dynamic event allocation and automatic event recycling (garbage collection) in the QF. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_NEW Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><b>5</b> </td><td><p class="starttd"><b>6</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Signal</b> </td><td><b>PoolID</b> </td><td><b>Ref.<br  />
 Count</b> </td><td><b>Event<br  />
 Size</b> </td><td><p class="starttd"><b>Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adfe3bc0c4afd40b4e6da539605f8216e" title="new event was created">QS_QF_NEW</a></code>  </td><td># </td><td># </td><td>NaN </td><td>NaN </td><td># </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4a48aeb5f5cc56c184a29f161d403db4" title="garbage collection attempt">QS_QF_GC_ATTEMPT</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td>NaN </td><td><p class="starttd">0 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a515fdabfa88153e12a3bbdbf5e8a4499" title="garbage collection">QS_QF_GC</a></code>  </td><td># </td><td># </td><td># </td><td>NaN </td><td>NaN </td><td>-1  </td></tr>
</table>
<p>The cumulative sum over the 'Delta' column should not have any long-time trends, because this would indicate event leak. The following picture shows the plot for the test data.</p>
<div class="image">
<img src="FigQSPY.03.jpg" alt=""/>
<div class="caption">
Plot stairs(Q_NEW(:,1), cumsum(Q_NEW(:,6)))</div></div>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_NEW</code> matrix:</p>
<table summary="Q_NEW records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5adfe3bc0c4afd40b4e6da539605f8216e" title="new event was created">QS_QF_NEW</a></code>  </td><td><p class="starttd"><code>Q_NEW(:,6) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a4a48aeb5f5cc56c184a29f161d403db4" title="garbage collection attempt">QS_QF_GC_ATTEMPT</a></code>  </td><td><p class="starttd"><code>Q_NEW(:,6) == 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a515fdabfa88153e12a3bbdbf5e8a4499" title="garbage collection">QS_QF_GC</a></code>  </td><td><code>Q_NEW(:,6) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_PUB"></a>
Q_PUB Matrix</h1>
<p>The N-by-7 <code>Q_PUB</code> matrix stores QS records pertaining to publishing events in QF. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_PUB Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><b>5</b> </td><td><b>6</b> </td><td><p class="starttd"><b>7</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Sender</b> </td><td><b>Signal</b> </td><td><b>PoolID</b> </td><td><b>Ref.<br  />
 Count</b> </td><td><b># Events<br  />
 Multicast</b> </td><td><p class="starttd"><b>Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2cee74edfbadce4bbd3982806b7efb48" title="an event was published">QS_QF_PUBLISH</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td># </td><td>#  </td></tr>
</table>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_PUB</code> matrix:</p>
<table summary="Q_PUB records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2cee74edfbadce4bbd3982806b7efb48" title="an event was published">QS_QF_PUBLISH</a></code>  </td><td><code>Q_PUB(:,7) &gt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_TIME"></a>
Q_TIME Matrix</h1>
<p>The N-by-7 <code>Q_TIME</code> matrix stores QS records pertaining to time events in QF. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_TIME Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><b>4</b> </td><td><b>5</b> </td><td><b>6</b> </td><td><p class="starttd"><b>7</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>QTimeEvt<br  />
 Object</b> </td><td><b>Signal</b> </td><td><b>QActive<br  />
 Object</b> </td><td><b>QTimeEvt<br  />
 Counter</b> </td><td><b>QTimeEvt<br  />
 Interval</b> </td><td><p class="starttd"><b>QTimeEvt<br  />
 Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a></code>  </td><td>NaN </td><td>NaN </td><td>NaN </td><td>NaN </td><td>#(1) </td><td>NaN </td><td><p class="starttd">0 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ad8eb4a56375cadd56963b580940429bf" title="a time event was armed">QS_QF_TIMEEVT_ARM</a></code>  </td><td># </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a166206ff01dabb9e8a1f90ebe84c99de" title="true disarming of an armed time event">QS_QF_TIMEEVT_DISARM</a></code>  </td><td># </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a08af27f4ec39794b3d9f6c481b15c617" title="a time event expired and was disarmed">QS_QF_TIMEEVT_AUTO_DISARM</a></code>  </td><td>NaN </td><td># </td><td>NaN </td><td># </td><td>NaN </td><td>NaN </td><td><p class="starttd">-1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6432a10cabc4d6849fbf18dbf9c1b457" title="attempt to disarm a disarmed QTimeEvt">QS_QF_TIMEEVT_DISARM_ATTEMPT</a></code>  </td><td># </td><td># </td><td>NaN </td><td># </td><td>NaN </td><td>NaN </td><td><p class="starttd">0 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2346cc6f9d474d64e1a814f1eb3a12c9" title="rearming of a time event">QS_QF_TIMEEVT_REARM</a></code>  </td><td># </td><td># </td><td>NaN </td><td># </td><td># </td><td># </td><td><p class="starttd">#(2) </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5b533a17a8d64eeee427069e15aefd68" title="a time event posted itself directly to an AO">QS_QF_TIMEEVT_POST</a></code>  </td><td># </td><td># </td><td># </td><td># </td><td>NaN </td><td>NaN </td><td>0  </td></tr>
</table>
<p>(1) For <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a> record this matrix element contains the Tick Counter.</p>
<p>(2) For <a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2346cc6f9d474d64e1a814f1eb3a12c9" title="rearming of a time event">QS_QF_TIMEEVT_REARM</a> event this matrix element is 0 if the time event was disarmed and rearmed again, and 1 if the time event was only armed.</p>
<p>The cumulative sum over the 'Delta' column indicates the total number of armed time events at any given time. The following picture shows the plot for the test data:</p>
<div class="image">
<img src="FigQSPY.04.jpg" alt=""/>
<div class="caption">
Plot stairs(Q_TIME(:,1), cumsum(Q_TIME(:,7)))</div></div>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_TIME</code> matrix:</p>
<table summary="Q_TIME records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a99f61a3910479d3f84cd645c512c29cd" title="QF_tickX() was called.">QS_QF_TICK</a></code>  </td><td><p class="starttd"><code>isnan(Q_TIME(:,2))</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ad8eb4a56375cadd56963b580940429bf" title="a time event was armed">QS_QF_TIMEEVT_ARM</a></code>  </td><td><p class="starttd"><code>Q_TIME(:,7) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a166206ff01dabb9e8a1f90ebe84c99de" title="true disarming of an armed time event">QS_QF_TIMEEVT_DISARM</a></code>  </td><td><p class="starttd"><code>~isnan(Q_TIME(:,1)) &amp; Q_TIME(:,7) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a08af27f4ec39794b3d9f6c481b15c617" title="a time event expired and was disarmed">QS_QF_TIMEEVT_AUTO_DISARM</a></code>  </td><td><p class="starttd"><code>isnan(Q_TIME(:,1)) &amp; Q_TIME(:,7) &lt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a6432a10cabc4d6849fbf18dbf9c1b457" title="attempt to disarm a disarmed QTimeEvt">QS_QF_TIMEEVT_DISARM_ATTEMPT</a></code>  </td><td><p class="starttd"><code>isnan(Q_TIME(:,3)) &amp; isnan(Q_TIME(:,5)) &amp; Q_TIME(:,7) == 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a2346cc6f9d474d64e1a814f1eb3a12c9" title="rearming of a time event">QS_QF_TIMEEVT_REARM</a></code>  </td><td><p class="starttd"><code>isnan(Q_TIME(:,3)) &amp; ~isnan(Q_TIME(:,5))</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5b533a17a8d64eeee427069e15aefd68" title="a time event posted itself directly to an AO">QS_QF_TIMEEVT_POST</a></code>  </td><td><code>~isnan(Q_TIME(:,3)) &amp; ~isnan(Q_TIME(:,4))</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_INT"></a>
Q_INT Matrix</h1>
<p>The N-by-3 <code>Q_INT</code> matrix stores QS records pertaining to interrupt disabling and enabling. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_INT Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><p class="starttd"><b>3</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Interrupt<br  />
 Nesting</b> </td><td><p class="starttd"><b>Nesting<br  />
 Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5d730ee7bcf28e438c08841ffba5e9fa" title="interrupts were disabled">QS_QF_INT_DISABLE</a></code>  </td><td># </td><td># </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a0e75f3f2dc81c8e819c93d5d45373efc" title="interrupts were enabled">QS_QF_INT_ENABLE</a></code>  </td><td># </td><td># </td><td>-1  </td></tr>
</table>
<p>The cumulative sum over the 'Delta' column indicates interrupt lock nesting and should closely follow column 2.</p>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_INT</code> matrix:</p>
<table summary="Q_INT records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a5d730ee7bcf28e438c08841ffba5e9fa" title="interrupts were disabled">QS_QF_INT_DISABLE</a></code>  </td><td><p class="starttd"><code>Q_INT(:,3) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a0e75f3f2dc81c8e819c93d5d45373efc" title="interrupts were enabled">QS_QF_INT_ENABLE</a></code>  </td><td><code>Q_INT(:,3) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_ISR"></a>
Q_ISR Matrix</h1>
<p>The N-by-4 <code>Q_ISR</code> matrix stores QS records pertaining to interrupt entry and exit. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_ISR Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><p class="starttd"><b>4</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Interrupt<br  />
 Nesting</b> </td><td><b>ISR<br  />
 Priority</b> </td><td><p class="starttd"><b>Nesting<br  />
 Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a8c47cd5f62e70203f84ef20a7a6913e8" title="an ISR was entered">QS_QF_ISR_ENTRY</a></code>  </td><td># </td><td># </td><td># </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9943e451d25321cd0084069dda8e34d0" title="an ISR was exited">QS_QF_ISR_EXIT</a></code>  </td><td># </td><td># </td><td># </td><td>-1  </td></tr>
</table>
<p>The cumulative sum over the 'Delta' column indicates interrupt nesting level and should closely follow column 2.</p>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_ISR</code> matrix:</p>
<table summary="Q_ISR records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a8c47cd5f62e70203f84ef20a7a6913e8" title="an ISR was entered">QS_QF_ISR_ENTRY</a></code>  </td><td><p class="starttd"><code>Q_ISR(:,4) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a9943e451d25321cd0084069dda8e34d0" title="an ISR was exited">QS_QF_ISR_EXIT</a></code>  </td><td><code>Q_ISR(:,4) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_MUTEX"></a>
Q_MUTEX Matrix</h1>
<p>The N-by-4 <code>Q_MUTEX</code> matrix stores QS records pertaining to the priority-ceiling mutex activity in QK. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_MUTEX Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><b>3</b> </td><td><p class="starttd"><b>4</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Original<br  />
 Priority</b> </td><td><b>Priority<br  />
 Ceiling</b> </td><td><p class="starttd"><b>Nesting<br  />
 Delta</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a67f0f152f74a0b40247871d9314855eb" title="a mutex was locked">QS_MUTEX_LOCK</a></code>  </td><td># </td><td># </td><td># </td><td><p class="starttd">+1 </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a09037a12e8b51cf22f06541da614ca4c" title="a mutex was unlocked">QS_MUTEX_UNLOCK</a></code>  </td><td># </td><td># </td><td># </td><td>-1  </td></tr>
</table>
<p>The cumulative sum over the 'Delta' column indicates QK scheduler lock nesting level.</p>
<div class="image">
<img src="FigQSPY.05.jpg" alt=""/>
<div class="caption">
Plot stairs(Q_MUTEX(:,1), cumsum(Q_MUTEX(:,4)), 'r') (red)</div></div>
<p>The following criteria (index matrices in MATLAB) unambiguously select the QS records from the <code>Q_ISR</code> matrix:</p>
<table summary="Q_ISR records" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>QS Record</b> </td><td><p class="starttd"><b>MATLAB Index Matrix</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a67f0f152f74a0b40247871d9314855eb" title="a mutex was locked">QS_MUTEX_LOCK</a></code>  </td><td><p class="starttd"><code>Q_MUTEX(:,4) &gt; 0</code> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5a09037a12e8b51cf22f06541da614ca4c" title="a mutex was unlocked">QS_MUTEX_UNLOCK</a></code>  </td><td><code>Q_MUTEX(:,4) &lt; 0</code>  </td></tr>
</table>
<h1><a class="anchor" id="MATLAB_Q_SCHED"></a>
Q_SCHED Matrix</h1>
<p>The N-by-3 <code>Q_SCHED</code> matrix stores QS records pertaining to scheduling next task in QK. The following table summarizes how the QS records are stored in the matrix: </p>
<table summary="Q_MUTEX Matrix" cellspacing="4" cellpadding="1" border="0" align="center">
<tr bgcolor="#c8cedc" align="center">
<td><b>&#160;MATLAB index &ndash;&gt;</b> </td><td><b>1</b> </td><td><b>2</b> </td><td><p class="starttd"><b>3</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#f0f0f0" align="center">
<td><b>QS Record<br  />
 |<br  />
 V</b> </td><td><b>Time<br  />
 Stamp</b> </td><td><b>Preempted<br  />
 Priority</b> </td><td><p class="starttd"><b>New<br  />
 Priority</b> </p>
<p class="endtd"></p>
</td></tr>
<tr bgcolor="#c0c0c0" align="center">
<td><code><a class="el" href="qs__copy_8h.html#acdb495c1e5524b5d95aaff82c47f6db5ae8263f38846b22d476fa448012da51be" title="scheduler found next task to execute">QS_SCHED_NEXT</a></code>  </td><td># </td><td># </td><td>#  </td></tr>
</table>
<hr  />
<p><b>Next:</b> <a class="el" href="qutest.html">QUTest&trade; Unit Testing Harness</a></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
      <ul>
        <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2021 Quantum Leaps</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.9.3</b>
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; Quantum Leaps 2020</a> &nbsp;| &nbsp; <a title="help" href="help.html">Using Online Help</a>&nbsp;| &nbsp;<a title="Doxygen" href="http://www.doxygen.nl">Generated with Doxygen</a>&nbsp; | &nbsp;<b>QTools 6.9.3</b>
</small></address>
        </li>
      </ul>
    </div>
    <script src="custom.js"></script>
  </body>
</html>
